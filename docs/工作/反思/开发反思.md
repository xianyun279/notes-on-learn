## 站点分布页的更改

模块页面结构功能：

地图的标注分三种：服务站点、运维车辆和运维人员。

站点显示模式有三种通过平台配置项决定显示哪一种
模式： 距离聚合 省份城市聚合 零散的站点点 

每一种模式都接收同样的站点过滤。

页面左下角是图例的筛选： 包括服务站图例，运维工种图例和站点图例。
页面右上角是各种类型的筛选，包括用户公司，运维公司，站点类型，服务类型。

切换运维公司时只显示当前运维公司所对应的车辆、人员、服务站和站点。

缩放地图时，所有标注点重新计算显示的尺寸大小

**问题一：是组件的拆分**
把运维人员和运维车辆的显示重绘逻辑 和 服务站的显示重绘逻辑 分别拆到单独的组件中。
建哥说：1 这样拆分逻辑不合理，比如想要隐藏页面标注的话 要到三个组件中去修改
       2 地图对象map, 不该在不同组件间传递
**问题二：和站点数过多时的处理**
    某个客户平台的站点数量是1000多个。打开的时候加载地图跟显示站点要花费很多时间。

    优化： 
    1：把划过站点时显示的浮框都写成组件的方式。没有使用地图上自带的marker的infobox以节省内存提升性能。
    2： 把站点marker上addeventlistener绑定的回调函数， 抽成单个函数，避免每个marker回调上创建一份函数节省内存。
    3：缓存所有的站点mark信息。站点列表更新时重绘的时，若站点的图标（状态 在线离线图标的显示）为改变，则直接使用缓存的marker信息，不用直接生成。
        生成过程需创建marker对象 计算marker位置和对应图片大小 比较耗时。


**问题三：改的好麻烦 组件拆分了好久 花费了好多时间 还请了一天假写代码来救赎罪恶感**
本来想着改一下结构，把组件的结构给改掉，可能只需要一天时间，后来我改了一个星期。
主要是脑袋里面没有思考好其具体的结构。，所以给阻塞住了，做了大量的无用功。
恰逢弟弟在我这过了一个周末也没写好。。半天陪弟弟玩半天改代码，结果依然没有改好。
然后建哥新冠阳了请假一周。这一周时间才改的差不多。
主要就是一个小功能都搞不清楚，为什么改了这么久？

脑袋思路不清晰，组件整的结构以及函数的拆分和调用，下次缕清再写。
测试过程没有逻辑， 应该按照没整条线的逻辑来测。
思考不周。
